# Жуэль
Жуэль — простой и красивый плеер для веба.

[Страница проекта](http://ilyabirman.ru/projects/jouele/)

## Как установить
```html
<!-- Dependencies -->
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="dist/jquery.jplayer.min.js"></script>
<!-- Jouele -->
<script src="dist/jouele.js"></script>
<link href="dist/jouele.css" rel="stylesheet"/>
```

## Как использовать
Каждая ссылка с классом jouele превратится в плеер МП3-файла, на который она ведёт. Например:
```html
<a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20News.mp3" class="jouele">Ilya Birman: News</a>
```
Обратитесь к файлу [`jouele.html`](jouele.html), чтобы увидеть дополнительные примеры использования.

## Расширенные возможности

### data-атрибуты
Добавление некоторых data-атрибутов изменит поведение или внешний вид плеера.

#### `data-length`
Тип: `String`  
По умолчанию: `0`

Указывает общую продолжительность трека, чтобы время показывалось сразу, а не после нажатия кнопки «плей».
Примеры для трека длительностью 2 минуты 47 секунд: `data-length="2:47"`, `data-length="167"`

#### `data-pause-on-space`
Тип: `Boolean`  
По умолчанию: `true`

Определяет, нужно ли останавливать этот трек нажатием пробела.

#### `data-play-on-space`
Тип: `Boolean`  
По умолчанию: `true`

Определяет, нужно ли воспроизводить этот трек нажатием пробела после того, как он был остановлен.

#### `data-scroll-on-space`
Тип: `Boolean`  
По умолчанию: `true`

Определяет, нужно ли проскроллить страницу после нажатия пробела и остановки/воспроизведения играющего трека. Работает только если соответствующий действию (пауза/воспроизведение) атрибут `data-pause-on-space`/`data-play-on-space` установлен в `true`.

#### `data-hide-timeline-on-pause`
Тип: `Boolean`  
По умолчанию: `false`

Определяет, нужно ли скрывать таймлайн трека, когда он не играет.

### Скин
Добавление класса `jouele-skin-dark` к ссылке, которая будет инициализирована Жуэлем, включает предустановленный «тёмный» скин. Например:
```html
<a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20News.mp3" class="jouele jouele-skin-dark">Ilya Birman: News</a>
```

Разработчик может создать собственный скин, изучив CSS-файл [`jouele.skin.css`](dist/jouele.skin.css).
Для подключения нового скина нужно следующее:
- Заменить в [`jouele.skin.css`](dist/jouele.skin.css) все селекторы `jouele-skin-dark` на новое название, сохранив паттерн `jouele-skin-{название_скина}` (например, `jouele-skin-blue`).
- Заменить цвета на необходимые вам.
- Добавить в ссылку, которая будет инициализирована Жуэлем, класс `jouele-skin-{название_скина}`.
- Подключить на сайт исправленный файл [`jouele.skin.css`](dist/jouele.skin.css) после [`jouele.css`](dist/jouele.css).

## Динамическая инициализация

#### `$(selector).jouele()`
Превращает ссылку `selector` в плеер. Возвращает jQuery-объект, к которому применялся метод — `$(selector)`.
Если всё прошло хорошо, то в поле `data` этого же jQuery-объекта `$(selector)` добавится дополнительное свойство `jouele`, в котором будет лежать экземпляр плеера `Jouele` (с этим экземпляром и работает весь API, [см. ниже](#api). DOM-элемент `selector` будет исключен из DOM при помощи jQuery.detach().
Блок плеера с классом `jouele` будет добавлен в DOM на место исключённого элемента и будет также иметь в своём `data.jouele` экземпляр плеера `Jouele`.

## Глобальный объект `$.Jouele`
Объект содержит в себе 3 свойства:

#### `$.Jouele.playlist`
Тип: `array`  
По умолчанию: `[]`

Массив со всеми экземплярами плеера `Jouele` на странице, расположенные в порядке их расположения в DOM.
Пустой массив, если активных экземпляров на странице нет.

#### `$.Jouele.lastPlayed`
Тип: `Jouele`  
По умолчанию: `null`

Ссылка на последний игравший (или играющий сейчас) экземпляр плеера `Jouele`.
`null`, если ничего ещё не играло или последний игравший трек был уничтожен при помощи метода `destroy`.

#### `$.Jouele.$jPlayer`
Тип: `Jouele`  
По умолчанию: `null`

jQuery-объект, к которому привязан экземпляр jPlayer.
`null`, если не был инициализирован ни один экземпляр плеера `Jouele` или если jPlayer недоступен.

## API
Рекомендованный способ обращения к API:
```javascript
var JoueleInstance = $(".jouele").data("jouele") // Получить экземпляр Jouele
```

### Методы API

#### `JoueleInstance.play()` или `$(".jouele").jouele("play")`
Начинает воспроизведение трека. Возвращает экземпляр плеера `Jouele`.

#### `JoueleInstance.pause()` или `$(".jouele").jouele("pause")`
Останавливает воспроизведение трека. Возвращает экземпляр плеера `Jouele`.

#### `JoueleInstance.destroy()` или `$(".jouele").jouele("destroy")`
Уничтожает плеер, возвращая в DOM-дерево ссылку, из которой он был создан. Возвращает jQuery-объект ссылки.

### Свойства API

#### `JoueleInstance.$link (jQuery object)`
Хранит jQuery-объект, из которого был создан плеер.

#### `JoueleInstance.isPlaying (Boolean)`
Указывает, играет ли сейчас этот трек.

#### `JoueleInstance.isPlayed (Boolean)`
Указывает, запускался ли этот трек.

#### `JoueleInstance.totalTime (Number)`
Хранит длительность трека в секундах. Может быть дробным.

## Титры
- Идея и разработка — [Илья Бирман](http://ilyabirman.ru)
- Разработка — [Евгений Лазарев](http://eugene-lazarev.ru)
- Перевод документации - Александра Годун

## Лицензия
[MIT License](LICENSE.md)
