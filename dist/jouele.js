!function(e){"use strict";function t(e,t){this.$link=e,this.options=t,this.isPlaying=!1,this.init()}e.fn.jouele=function(n){return this.each(function(){var a=e(this),o=a.data("jouele");o||new t(a,e.extend({},e.fn.jouele.defaults,n,a.data()))})},e.fn.jouele.defaults={swfPath:"./jplayer/",swfFilename:"jplayer.swf",supplied:"mp3",volume:1},t.prototype.init=function(){this.createDOM(),this.defineDeferred(),this.initPlayerPlugin(),this.bindEvents(),this.insertDOM()},t.prototype.destroy=function(){},t.prototype.onPause=function(){this.isPlaying=!1,this.$container.removeClass("jouele-status-playing")},t.prototype.onStop=function(){this.isPlaying=!1,this.$container.removeClass("jouele-status-playing")},t.prototype.onPlay=function(){e(document).trigger("jouele-stop",this),this.$container.addClass("jouele-status-playing"),this.isPlaying=!0},t.prototype.createDOM=function(){var t=e(document.createElement("div")),n=e(document.createElement("div")),a=e(document.createElement("div")),o=e(document.createElement("div")),i=this.$link.text(),l=function(){return[e(document.createElement("a")).addClass("jouele-download jouele-hidden"),e(document.createElement("div")).addClass("jouele-play-control").append(e(document.createElement("div")).addClass("jouele-unavailable jouele-to-hide"),e(document.createElement("div")).addClass("jouele-play-pause jouele-hidden").append(e(document.createElement("div")).addClass("jouele-play"),e(document.createElement("div")).addClass("jouele-pause").css({display:"none"}))),e(document.createElement("div")).addClass("jouele-time").append(e(document.createElement("div")).addClass("jouele-play-time"),e(document.createElement("div")).addClass("jouele-total-time")),e(document.createElement("div")).addClass("jouele-name").html(i)]},d=function(){return e(document.createElement("div")).addClass("jouele-mine").append(e(document.createElement("div")).addClass("jouele-mine-bar"),e(document.createElement("div")).addClass("jouele-load-bar jouele-hidden"),e(document.createElement("div")).addClass("jouele-play-bar"),e(document.createElement("div")).addClass("jouele-play-lift jouele-hidden").append(e(document.createElement("div")).addClass("jouele-buffering jouele-hidden")))};return this.$container=t.data("jouele",this).addClass("jouele").attr("id","jouele-ui-zone-"+(1e3+Math.round(8999*Math.random()))).append(n.addClass("jouele-invisible-object"),a.addClass("jouele-info-area").append(l()),o.addClass("jouele-progress-area").append(d())),this},t.prototype.defineDeferred=function(){var t=this;this.domReady=e.Deferred(),this.playerReady=e.Deferred(),e.when(this.domReady,this.playerReady).done(function(){delete t.domReady,delete t.playerReady,t.definePlayerSelectors(),e(document).trigger("jouele-ready",this)})},t.prototype.initPlayerPlugin=function(){var e=this,t=e.$container.find(".jouele-invisible-object");return this.$jPlayer=t.jPlayer({solution:"html,flash",preload:"metadata",errorAlerts:!1,swfPath:e.options.swfPath+e.options.swfFilename,supplied:e.options.supplied,volume:e.options.volume,ready:function(){var n=e.$link.attr("href");t.jPlayer("setMedia",{mp3:n}),e.$container.find(".jouele-download").attr("href",n),e.$container.find(".jouele-hidden").show(),e.$container.find(".jouele-to-hide").hide(),e.playerReady.resolve()},pause:function(){e.onPause.call(e)},stop:function(){e.onStop.call(e)},play:function(){e.onPlay.call(e)},progress:function(e){}}),this},t.prototype.insertDOM=function(){return this.$link.after(this.$container),this.$link.detach(),this.domReady.resolve(),this},t.prototype.definePlayerSelectors=function(){this.$jPlayer.jPlayer("option","cssSelectorAncestor","#"+this.$container.attr("id")),this.$jPlayer.jPlayer("option","cssSelector",{play:".jouele-play",pause:".jouele-pause"})},t.prototype.bindEvents=function(){var t=this;return e(document).on("jouele-stop",function(){t.isPlaying&&t.$jPlayer.jPlayer("pause")}),this};var n=function(){e(".jouele").jouele()};e(n)}(jQuery);